@model Fitvalle_25.Models.User
@{
    Layout = "~/Views/Shared/_LayoutCoach.cshtml";
    ViewData["Title"] = "Editar Perfil";
}

<div class="max-w-3xl mx-auto p-8 card-fitvalle animate__animated animate__fadeIn">
    <h2 class="text-3xl font-[Poppins] font-bold mb-6 text-[var(--color-text-primary)] flex items-center gap-2">
        <i data-lucide="edit" class="icon active"></i> Editar Perfil
    </h2>

    <form asp-action="UpdateProfile" method="post" enctype="multipart/form-data" class="space-y-6">
        <div class="flex flex-col items-center relative">
            <label for="photo" class="cursor-pointer group relative">
                <img id="photoPreview"
                     src="@(!string.IsNullOrEmpty(Model.PhotoUrl) ? Model.PhotoUrl : "/images/iconUser.png")"
                     class="w-32 h-32 rounded-full border-4 border-[var(--color-primary)] shadow-lg object-cover transition-transform duration-300 group-hover:scale-105" />
                <div class="absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover:opacity-100 rounded-full transition">
                    <i data-lucide="camera" class="text-white w-6 h-6"></i>
                </div>
            </label>
            <input id="photo" name="photo"  value="@Model.PhotoUrl" type="file" accept="image/*" class="hidden" />
        </div>

        <div>
            <label class="block text-[var(--color-text-secondary)] font-semibold mb-1">Nombre</label>
            <input asp-for="Name"
                   class="w-full p-3 rounded-lg border border-gray-300 bg-[var(--color-background-light)] text-[var(--color-text-primary)] focus:border-[var(--color-primary)] focus:ring-[var(--color-primary)] focus:ring-1 outline-none transition" />
        </div>

        <div>
            <label class="block text-[var(--color-text-secondary)] font-semibold mb-1">Descripción</label>
            <textarea asp-for="Description"
                      class="w-full p-3 rounded-lg border border-gray-300 bg-[var(--color-background-light)] text-[var(--color-text-primary)] focus:border-[var(--color-primary)] focus:ring-[var(--color-primary)] focus:ring-1 outline-none transition min-h-[120px]"></textarea>
        </div>

        <button type="submit"
                class="bg-[var(--color-primary)] hover:bg-[var(--color-primary-hover)] text-white px-4 py-2 rounded-lg shadow transition duration-300 w-full font-semibold">
            Guardar cambios
        </button>
    </form>
</div>

@section Scripts {
    <script>
        lucide.createIcons();

        const input = document.getElementById("photoInput");
        const preview = document.getElementById("photoPreview");
        input.addEventListener("change", e => {
            const file = e.target.files[0];
            if (file) preview.src = URL.createObjectURL(file);
        });
    </script>
}
