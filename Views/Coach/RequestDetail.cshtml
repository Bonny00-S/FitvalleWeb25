@model (Fitvalle_25.Models.Request solicitud, Fitvalle_25.Models.User cliente, Fitvalle_25.Models.Customer customer, int edad)

@{
    Layout = "~/Views/Shared/_LayoutCoach.cshtml";
    ViewData["Title"] = "Detalle de Solicitud";

    var s = Model.solicitud;
    var u = Model.cliente;
    var c = Model.customer;
    var edad = Model.edad;
}

<div class="bg-white p-8 rounded-xl shadow-md text-black max-w-2xl mx-auto animate__animated animate__fadeIn">
    <h2 class="text-2xl font-bold mb-6 text-[#a10d3a] text-center">
        Solicitud de @u.Name
    </h2>

    <!-- 🧍 Datos del cliente -->
    <div class="grid grid-cols-2 gap-4 text-gray-800">
        <div>
            <p><span class="font-semibold">📧 Email:</span> @u.Email</p>
            <p><span class="font-semibold">🎂 Edad:</span> @edad años</p>
            <p><span class="font-semibold">📏 Altura:</span> @c.Height cm</p>
            <p><span class="font-semibold">⚖️ Peso actual:</span> @c.Weight kg</p>
        </div>
        <div>
            <p><span class="font-semibold">🥇 Meta de peso:</span> @c.GoalWeight kg</p>
            <p><span class="font-semibold">🗓️ Registro:</span> @c.RegisterDate</p>
            <p>
                <span class="font-semibold">📌 Estado:</span>
                <span class="@(s.State == "accepted" ? "text-green-700 font-semibold" : "text-yellow-700 font-semibold")">
                    @s.State
                </span>
            </p>
        </div>
    </div>

    <hr class="my-6 border-gray-300">

    <!-- 🧾 Descripción -->
    <h3 class="text-lg font-semibold text-[#a10d3a] mb-2">Preferencias de entrenamiento</h3>
    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 text-gray-700 whitespace-pre-line">
        @s.Description
    </div>

    <div class="mt-6 flex justify-center space-x-4">
        <a asp-action="RequestCustomers" asp-controller="Coach"
           class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md transition">
            ⬅ Volver
        </a>

        @if (s.State != "accepted")
        {
            <form asp-action="AcceptRequest" method="post" class="inline">
                <input type="hidden" name="requestId" value="@s.Id" />
                <input type="hidden" name="customerId" value="@s.CustomerId" />
                <button type="submit"
                        class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition">
                    ✔ Aceptar Alumno
                </button>
            </form>
        }
        else
        {
            <span class="text-green-700 font-semibold flex items-center gap-2">
                ✅ Alumno asignado
            </span>
        }
    </div>
</div>
