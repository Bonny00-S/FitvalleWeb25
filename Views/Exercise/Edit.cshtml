@model Fitvalle_25.Models.Exercise.Exercise
@{
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
    ViewData["Title"] = "Editar Ejercicio";
}

<div class="bg-white rounded-xl shadow-md p-8 max-w-lg mx-auto text-black">
    <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Editar Ejercicio</h2>
    @if (ViewBag.Error != null)
    {
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4">
            <strong class="font-bold">Error:</strong>
            <span class="block sm:inline">@ViewBag.Error</span>
        </div>
    }
    <form asp-action="Edit" method="post" class="space-y-5">
        <input type="hidden" asp-for="Id" />

        <!-- Nombre -->
        <div>
            <label class="block text-gray-700 font-semibold mb-1">Nombre</label>
            <input asp-for="Name" required class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#a10d3a] focus:outline-none" />
        </div>

        <!-- Descripción -->
        <div>
            <label class="block text-gray-700 font-semibold mb-1">Descripción</label>
            <textarea asp-for="Description" required rows="3"
                      class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#a10d3a] focus:outline-none"></textarea>
        </div>
        <!-- Imagen -->
        <div>
            <label class="block text-gray-700 font-semibold mb-1">Imagen o GIF (URL)</label>
            <input asp-for="ImageUrl" type="url" placeholder="https://ejemplo.com/imagen.gif"
                   value="@Model.ImageUrl"
                   class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#a10d3a] focus:outline-none" />
            <p class="text-sm text-gray-500 mt-1">Puedes actualizar el enlace de la imagen o dejar el actual.</p>
        </div>
        @if (!string.IsNullOrEmpty(Model?.ImageUrl))
        {
            <video autoplay loop muted playsinline class="w-32 h-32 rounded-lg mt-3 shadow">
                <source src="@Model.ImageUrl" type="video/mp4">
            </video>
        }


        <!-- Músculo -->
        <div>
            <label class="block text-gray-700 font-semibold mb-1">Músculo objetivo</label>
            <select asp-for="MuscleID" required
                    class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#a10d3a] focus:outline-none">
                @foreach (var m in ViewBag.Muscles as List<Fitvalle_25.Models.Exercise.TargetMuscle>)
                {
                    <option value="@m.Id" selected="@(Model.MuscleID == m.Id)">
                        @m.Name
                    </option>
                }
            </select>
        </div>

        <!-- Tipo -->
        <div>
            <label class="block text-gray-700 font-semibold mb-1">Tipo de ejercicio</label>
            <select asp-for="TypeID" required
                    class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#a10d3a] focus:outline-none">
                @foreach (var t in ViewBag.Types as List<Fitvalle_25.Models.Exercise.ExerciseType>)
                {
                    <option value="@t.Id" selected="@(Model.TypeID == t.Id)">
                        @t.Name
                    </option>
                }
            </select>
        </div>

        <!-- Botones -->
        <div class="flex justify-between items-center mt-6">
            <a asp-action="Index"
               class="bg-gray-500 hover:bg-gray-600 text-white font-bold px-6 py-2 rounded-full transition duration-300">
                ⬅ Volver
            </a>
            <button type="submit"
                    class="bg-[#a10d3a] hover:bg-[#870a2f] text-white font-bold px-6 py-2 rounded-full transition duration-300">
                💾 Guardar Cambios
            </button>
        </div>

        @if (ViewBag.Error != null)
        {
            <div class="bg-red-100 text-red-700 px-4 py-2 rounded-lg mb-4 mt-4">
                @ViewBag.Error
            </div>
        }
    </form>
</div>
