@{
    ViewData["Title"] = "Login";
    Layout = null;
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <title>Login - FITVALLE</title>
    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="/images/LogoFITNESS.jpeg">
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</head>

<body class="bg-gray-900 flex items-center justify-center min-h-screen">

    <div class="flex bg-gray-900 rounded-2xl overflow-hidden w-11/12 md:w-3/4 lg:w-2/3 shadow-2xl animate__animated animate__fadeInUp">

        <!-- Caja izquierda: login -->
        <div class="flex flex-col items-center justify-center bg-[#a10d3a] text-white p-10 w-full md:w-1/2">
            <!-- Logo -->
            <div class="flex flex-col items-center mb-6">
                <img src="/images/LogoFITNESS.jpeg" alt="Logo"
                     class="w-20 h-20 mb-3 rounded-full object-cover">
                <h2 class="text-2xl font-semibold">FITVALLE</h2>
            </div>

            <!-- Formulario -->
            <form asp-action="Login" method="post" class="w-full max-w-sm" id="loginForm">
                <div class="mb-5 relative">
                    <input type="email" name="email" id="email"
                           placeholder="Correo"
                           class="w-full bg-transparent border-b-2 border-white text-white placeholder-gray-200 focus:outline-none focus:border-yellow-400 py-2 pr-10"
                           required>
                    <i class="fa fa-envelope absolute right-2 top-3 text-white"></i>
                </div>
                <div class="mb-5 relative">
                    <input type="password" name="password" id="password"
                           placeholder="Contraseña"
                           class="w-full bg-transparent border-b-2 border-white text-white placeholder-gray-200 focus:outline-none focus:border-yellow-400 py-2 pr-10"
                           required minlength="6">
                    <i class="fa fa-lock absolute right-2 top-3 text-white"></i>
                </div>

                <button type="submit" id="btnLogin"
                        class="w-full bg-gray-500 text-black font-bold py-2 rounded-full cursor-not-allowed opacity-60 transition duration-300 mb-3"
                        disabled>
                    INICIAR SESIÓN
                </button>

                <!-- Enlaces adicionales -->
                <div class="flex justify-between text-sm mt-2">
                    <a asp-controller="Auth" asp-action="ResetPassword" class="text-yellow-300 hover:underline">
                        Olvidé mi contraseña
                    </a>
                    <a asp-controller="Auth" asp-action="Landing" class="text-yellow-300 hover:underline">
                        Volver a Landing
                    </a>
                </div>
            </form>

            @if (ViewBag.Error != null)
            {
                <p class="mt-4 text-yellow-300 animate__animated animate__shakeX">@ViewBag.Error</p>
            }
        </div>

        <!-- Caja derecha: imagen -->
        <div class="hidden md:block w-1/2 bg-cover bg-center"
             style="background-image: url('/images/LoginFondo.jpg');">
        </div>
    </div>

    <!-- ✅ Script de validación -->
    <script>
        const emailInput = document.getElementById("email");
        const passwordInput = document.getElementById("password");
        const loginButton = document.getElementById("btnLogin");

        function validarCampos() {
            const emailVal = emailInput.value.trim();
            const passVal = passwordInput.value.trim();

            // Validar formato de correo
            const emailValido = /^[^\s@@]+@@[^\s@@]+\.[^\s@@]+$/.test(emailVal);

            const passValido = passVal.length >= 6;

            if (emailValido && passValido) {
                loginButton.disabled = false;
                loginButton.classList.remove("bg-gray-500", "opacity-60", "cursor-not-allowed");
                loginButton.classList.add("bg-white", "hover:bg-gray-200", "text-black");
            } else {
                loginButton.disabled = true;
                loginButton.classList.add("bg-gray-500", "opacity-60", "cursor-not-allowed");
                loginButton.classList.remove("bg-white", "hover:bg-gray-200");
            }
        }

        emailInput.addEventListener("input", validarCampos);
        passwordInput.addEventListener("input", validarCampos);
    </script>

</body>
</html>
